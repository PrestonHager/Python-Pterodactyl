{
  "_comment": "Pterodactyl Egg for Python Environment with uv Package Manager",
  "meta": {
    "version": "PTDL_v2",
    "update_url": null
  },
  "exported_at": "2025-10-24T20:00:00+00:00",
  "name": "Python UV Environment",
  "author": "me@prestonhager.com",
  "description": "A Python environment using uv package manager with Git repository integration. Supports GitHub/GitLab repositories with authentication, automatic dependency installation, and flexible startup options.",
  "features": null,
  "docker_images": {
    "python-uv-3.8": "python:3.8-slim",
    "python-uv-3.9": "python:3.9-slim",
    "python-uv-3.10": "python:3.10-slim",
    "python-uv-3.11": "python:3.11-slim",
    "python-uv-3.12": "python:3.12-slim",
    "python-uv-3.13": "python:3.13-slim"
  },
  "file_denylist": [],
  "startup": "if [[ ${PULL_ON_START} ]]; then git pull; fi; if [[ ! -z \"${ADDITIONAL_PACKAGES}\" ]]; then uv add ${ADDITIONAL_PACKAGES}; fi; ${STARTUP_COMMAND}",
  "config": {
    "files": "{}",
    "startup": "{\n    \"done\": \")! For help, type \",\n    \"userInteraction\": [\n        \"Go to eula.txt for more info.\"\n    ]\n}",
    "logs": "{}",
    "stop": "^C"
  },
  "scripts": {
    "installation": {
      "script": "#!/bin/ash\n# Python UV Installation Script\n#\n# Server Files: /mnt/server\napt update\napt install -y curl git\nmkdir -p /mnt/server\ncd /mnt/server\n\n# Clone repository if REPO_URL is provided\nif [[ ! -z \"${REPO_URL}\" ]]; then\n    echo \"Cloning repository from ${REPO_URL}...\"\n    \n    # Handle authentication if credentials are provided\n    if [[ ! -z \"${GIT_USERNAME}\" ]] && [[ ! -z \"${GIT_TOKEN}\" ]]; then\n        # Extract domain and path from URL\n        REPO_DOMAIN=$(echo ${REPO_URL} | sed -E 's|https?://([^/]+).*|\\\\1|')\n        REPO_PATH=$(echo ${REPO_URL} | sed -E 's|https?://[^/]+/(.*)|\\\\1|')\n        AUTH_URL=\"https://${GIT_USERNAME}:${GIT_TOKEN}@${REPO_DOMAIN}/${REPO_PATH}\"\n        git clone ${AUTH_URL} .\n    else\n        git clone ${REPO_URL} .\n    fi\n    \n    echo \"Repository cloned successfully!\"\nelse\n    echo \"No repository URL provided. Creating empty project structure...\"\n\n    \n    # Create a basic main.py if it doesn't exist\n    if [[ ! -f main.py ]]; then\n        cat > main.py << 'EOF'\n#!/usr/bin/env python3\nprint(\"Hello from Python UV Environment!\")\nprint(\"Please configure your application in this file.\")\nEOF\n        chmod +x main.py\n    fi\nfi\n\n# Install uv package manager\n\ncurl -LsSf https://astral.sh/uv/install.sh | sh\nexport PATH=\"/root/.local/bin:$PATH\"\n\n# Initialize uv project if pyproject.toml doesn't exist\nif [[ ! -f pyproject.toml ]]; then\n    echo \"Initializing uv project...\"\n    uv init --python ${UV_PYTHON_VERSION:-3.11} --name python-app\nfi\n\n# Install additional packages if specified\nif [[ ! -z \"${ADDITIONAL_PACKAGES}\" ]]; then\n    echo \"Installing additional packages: ${ADDITIONAL_PACKAGES}\"\n    uv add ${ADDITIONAL_PACKAGES}\nfi\n\necho \"Python UV Environment installation completed!\"\necho \"Repository location: /mnt/server\"\necho \"Available commands:\"\necho \"  - uv run python main.py\"\necho \"  - uv add <package-name>\"\necho \"  - uv sync\"\n",
      "container": "ghcr.io/pterodactyl/installers:alpine",
      "entrypoint": "ash"
    }
  },
  "variables": [
    {
      "name": "REPO_URL",
      "description": "Git repository URL (GitHub/GitLab)",
      "env_variable": "REPO_URL",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:255",
      "field_type": "text"
    },
    {
      "name": "STARTUP_SCRIPT",
      "description": "Command to run your Python application",
      "env_variable": "STARTUP_SCRIPT",
      "default_value": "python main.py",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:500",
      "field_type": "text"
    },
    {
      "name": "GIT_USERNAME",
      "description": "Git username for repository authentication (optional)",
      "env_variable": "GIT_USERNAME",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:100",
      "field_type": "text"
    },
    {
      "name": "GIT_TOKEN",
      "description": "Git personal access token for authentication (optional)",
      "env_variable": "GIT_TOKEN",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:255",
      "field_type": "text"
    },
    {
      "name": "PULL_ON_START",
      "description": "Pull latest changes from repository on startup",
      "env_variable": "PULL_ON_START",
      "default_value": "1",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|boolean",
      "field_type": "text"
    },
    {
      "name": "UV_PYTHON_VERSION",
      "description": "Python version to use with uv",
      "env_variable": "UV_PYTHON_VERSION",
      "default_value": "3.11",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|in:3.8,3.9,3.10,3.11,3.12,3.13",
      "field_type": "text"
    },
    {
      "name": "UV_VENV_NAME",
      "description": "Virtual environment directory name",
      "env_variable": "UV_VENV_NAME",
      "default_value": ".venv",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:50",
      "field_type": "text"
    },
    {
      "name": "ADDITIONAL_PACKAGES",
      "description": "Additional Python packages to install (space-separated)",
      "env_variable": "ADDITIONAL_PACKAGES",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:500",
      "field_type": "text"
    },
    {
      "name": "STARTUP_COMMAND",
      "description": "Internal startup command (do not modify)",
      "env_variable": "STARTUP_COMMAND",
      "default_value": "./start.sh",
      "user_viewable": true,
      "user_editable": false,
      "rules": "required|string",
      "field_type": "text"
    }
  ]
}
